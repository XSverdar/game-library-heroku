import{_ as b,N as k,T as r,v as w,r as h,o as c,c as u,a as _,d as t,w as y,F as v,f as A,g as m,h as p,i as x,p as S,e as D,t as I,j as N}from"./index.d90de39f.js";const V={name:"EditAccount1",components:{Navbar:k},data(){return{username:"",email:"",description:"",selectedImage:"",imagePreview:"",errors:""}},mounted(){const o=r.getLocalAccessToken(),l=`verdant-games.herokuapp.com/api/users/${r.getDecoded()._id}`,n=this;fetch(l,{headers:{Authorization:`token ${o}`},mode:"cors"}).then(s=>s.json()).then(s=>{console.log(s),n.username=s.username,n.email=s.email,n.description=s.description,n.imagePreview=s.image}).catch(s=>console.log(s))},methods:{onFileSelected(o){this.selectedImage=o.target.files[0];const e=new FileReader;e.onload=l=>{this.imagePreview=l.target.result},e.readAsDataURL(o.target.files[0])},async save(){const o=r.getLocalAccessToken(),e=new FormData;if(e.append("username",this.username),e.append("email",this.email),e.append("description",this.description),e.append("image",this.selectedImage),this.isValid()){const n=`http://verdant-games.herokuapp.com/api/users/${r.getDecoded()._id}`;(await fetch(n,{headers:{Authorization:`token ${o}`},method:"PATCH",body:e,mode:"cors"})).ok?this.$router.push({name:"Account"}):console.log("Something went wrong")}},isValid(){let o=1;const e=[];return this.username==""&&(e.push("Username field is empty."),o=0),this.email==""?(e.push("Email field is empty."),o=0):w.isEmail(this.email)||(e.push("Please provide a valid email."),o=0),this.errors=e,o}}},a=o=>(S("data-v-81b5b47c"),o=o(),D(),o),E={class:"parent-container"},F={class:"body"},P={class:"profile-window"},T=N("Back"),U=a(()=>t("div",{class:"title"},"My Profile",-1)),C={class:"main-box"},B=["src"],L={enctype:"multipart/form-data"},M=a(()=>t("div",{class:"upload-btn"},"Upload Image",-1)),j={class:""},z={class:"info"},R=a(()=>t("h3",null,"Username",-1)),H=a(()=>t("h3",null,"Email",-1)),$=a(()=>t("h3",null,"Status",-1)),q=a(()=>t("br",null,null,-1)),G=a(()=>t("br",null,null,-1));function J(o,e,l,n,s,d){const g=h("Navbar"),f=h("router-link");return c(),u(v,null,[_(g),t("div",E,[t("div",F,[t("div",P,[_(f,{to:{name:"Account"}},{default:y(()=>[T]),_:1}),U,t("div",C,[(c(!0),u(v,null,A(s.errors,i=>(c(),u("div",{class:"err-msg",key:i.id},I(i),1))),128)),t("img",{src:s.imagePreview},null,8,B),t("form",L,[t("label",null,[M,t("input",{id:"img-input",type:"file",onChange:e[0]||(e[0]=(...i)=>d.onFileSelected&&d.onFileSelected(...i))},null,32)]),t("div",j,[t("div",z,[t("div",null,[R,m(t("input",{class:"input",type:"text","onUpdate:modelValue":e[1]||(e[1]=i=>s.username=i)},null,512),[[p,s.username]])]),t("div",null,[H,m(t("input",{class:"input",type:"text","onUpdate:modelValue":e[2]||(e[2]=i=>s.email=i)},null,512),[[p,s.email]])]),t("div",null,[$,m(t("textarea",{class:"text-area","onUpdate:modelValue":e[3]||(e[3]=i=>s.description=i)},`\r
                      `,512),[[p,s.description]])])]),t("button",{id:"edit-button",onClick:e[4]||(e[4]=x(i=>d.save(),["prevent"]))},"Save")])]),q,G,t("button",{id:"delete",onClick:e[5]||(e[5]=i=>o.$router.push({name:"DeleteAccount"}))},"Delete Account")])])])])],64)}var O=b(V,[["render",J],["__scopeId","data-v-81b5b47c"]]);export{O as default};
